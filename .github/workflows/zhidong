name:zhidong

on:
  push:
    branches: [ main, master ]
    paths:
      - '.github/workflows/build_n60pro_argon_theme.yml'
  workflow_dispatch:
    inputs:
      tag_name:
        description: 'å‘å¸ƒæ ‡ç­¾ (ä¾‹å¦‚: v1.0.0)'
        required: true
        default: 'v1.0.0'

env:
  SOURCE_REPO: "https://github.com/padavanonly/immortalwrt-mt798x-24.10"
  SOURCE_BRANCH: "main"
  HIGH_POWER_CONFIG_URL: "https://raw.githubusercontent.com/padavanonly/immortalwrt-mt798x-6.6/2410/defconfig/nx60pro-ipailna-high-power.config"
  BUILD_DIR: "${{ github.workspace }}/immortalwrt"
  TARGET_SUBTARGET: "mediatek/mt7986"
  TARGET_PROFILE: "glinet_gl-mt6000"

jobs:
  build-and-release:
    name: ç¼–è¯‘å¹¶å‘å¸ƒå›ºä»¶ï¼ˆArgonä¸»é¢˜ç‰ˆï¼‰
    runs-on: ubuntu-22.04
    timeout-minutes: 210
    
    steps:
    # æ­¥éª¤1ï¼šå‡†å¤‡å·¥ä½œåŒº
    - name: å‡†å¤‡å·¥ä½œåŒº
      run: |
        echo "========================================"
        echo "N60 Pro ç¼–è¯‘ï¼ˆArgonä¸»é¢˜ç‰ˆï¼‰"
        echo "========================================"
        echo "å¼€å§‹æ—¶é—´: $(date)"
        echo "ä¸»é¢˜é€‰æ‹©: Argon ä¸»é¢˜ï¼ˆç¾Žè§‚çŽ°ä»£ï¼‰"
        echo "çº¯å‡€é…ç½®: ä»…OpenClash + iStore"
        echo "é¢„é…ç½®:"
        echo "  - ç®¡ç†IP: 192.168.6.1"
        echo "  - PPPoE: 15828860970 / 147258"
        echo "  - WiFi: locust / locust-5G (å¯†ç : 36925888)"
        echo "  - IPv6: è‡ªåŠ¨å¯ç”¨"
        echo "========================================"

    # æ­¥éª¤2ï¼šå®‰è£…ç¼–è¯‘ä¾èµ–
    - name: å®‰è£…ä¾èµ–
      run: |
        sudo apt-get update
        sudo apt-get install -y \
          build-essential \
          ccache \
          clang \
          flex \
          bison \
          g++ \
          gawk \
          gcc-multilib \
          gettext \
          git \
          libncurses5-dev \
          libssl-dev \
          python3 \
          python3-distutils \
          python3-pip \
          rsync \
          unzip \
          zlib1g-dev \
          file \
          wget \
          curl \
          jq \
          zip

    # æ­¥éª¤3ï¼šè®¾ç½®ç¼“å­˜
    - name: è®¾ç½®ç¼–è¯‘ç¼“å­˜
      uses: actions/cache@v3
      with:
        path: |
          ~/.ccache
          ${{ github.workspace }}/immortalwrt/dl
        key: ${{ runner.os }}-openwrt-argon-${{ hashFiles('.github/workflows/build_n60pro_argon_theme.yml') }}
        restore-keys: |
          ${{ runner.os }}-openwrt-argon-

    # æ­¥éª¤4ï¼šå…‹éš†æºç 
    - name: å…‹éš†237æºç 
      run: |
        echo "æ¸…ç†æ—§ç›®å½•å¹¶å…‹éš†æºç ..."
        rm -rf "$BUILD_DIR"
        git clone --depth=1 --branch="$SOURCE_BRANCH" "$SOURCE_REPO" "$BUILD_DIR"
        cd "$BUILD_DIR"
        COMMIT_HASH=$(git rev-parse --short HEAD)
        COMMIT_DATE=$(git log -1 --format=%cd --date=short)
        echo "æºç ç‰ˆæœ¬: $COMMIT_HASH ($COMMIT_DATE)"
        
        # ä¿å­˜ç‰ˆæœ¬ä¿¡æ¯
        echo "COMMIT_HASH=$COMMIT_HASH" >> $GITHUB_ENV
        echo "COMMIT_DATE=$COMMIT_DATE" >> $GITHUB_ENV

    # æ­¥éª¤5ï¼šé…ç½®è½¯ä»¶æº
    - name: é…ç½®è½¯ä»¶æº
      run: |
        cd "$BUILD_DIR"
        echo "é…ç½®iStoreå’ŒOpenClashè½¯ä»¶æº..."
        
        # æ·»åŠ å¿…è¦çš„è½¯ä»¶æº
        cat >> feeds.conf.default << 'EOF'
src-git istore https://github.com/linkease/istore.git;main
src-git openclash https://github.com/vernesong/OpenClash.git;master
EOF
        
        # æ›´æ–°å¹¶å®‰è£…feeds
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        ./scripts/feeds install -f luci-app-store
        ./scripts/feeds install -f luci-app-openclash

    # æ­¥éª¤6ï¼šåˆ›å»ºé¢„é…ç½®æ–‡ä»¶
    - name: åˆ›å»ºé¢„é…ç½®æ–‡ä»¶
      run: |
        cd "$BUILD_DIR"
        echo "åˆ›å»ºé¢„é…ç½®æ–‡ä»¶..."
        
        # åˆ›å»ºç›®å½•ç»“æž„
        mkdir -p files/etc/config
        mkdir -p files/etc/uci-defaults
        mkdir -p files/root
        
        # 1. networké…ç½® (PPPoE + IPåœ°å€)
        cat > files/etc/config/network << 'EOF'
config interface 'loopback'
    option ifname 'lo'
    option proto 'static'
    option ipaddr '127.0.0.1'
    option netmask '255.0.0.0'

config interface 'lan'
    option ifname 'eth1'
    option proto 'static'
    option ipaddr '192.168.6.1'
    option netmask '255.255.255.0'
    option ip6assign '60'

config interface 'wan'
    option ifname 'eth0'
    option proto 'pppoe'
    option username '15828860970'
    option password '147258'
    option ipv6 'auto'

config interface 'wan6'
    option ifname '@wan'
    option proto 'dhcpv6'
    option reqaddress 'try'
    option reqprefix 'auto'
EOF

        # 2. wirelessé…ç½® (WiFiåç§°å’Œå¯†ç )
        cat > files/etc/config/wireless << 'EOF'
config wifi-device 'radio0'
    option type 'mac80211'
    option path '1e140000.pcie'
    option channel '36'
    option band '5g'
    option htmode 'HE160'
    option disabled '0'

config wifi-iface 'default_radio0'
    option device 'radio0'
    option network 'lan'
    option mode 'ap'
    option ssid 'locust-5G'
    option encryption 'psk2'
    option key '36925888'

config wifi-device 'radio1'
    option type 'mac80211'
    option path '18000000.wmac'
    option channel '11'
    option band '2g'
    option htmode 'HE40'
    option disabled '0'

config wifi-iface 'default_radio1'
    option device 'radio1'
    option network 'lan'
    option mode 'ap'
    option ssid 'locust'
    option encryption 'psk2'
    option key '36925888'
EOF

        # 3. ç³»ç»Ÿé…ç½®
        cat > files/etc/config/system << 'EOF'
config system
    option hostname 'N60Pro'
    option timezone 'CST-8'
    option zonename 'Asia/Shanghai'
    option log_size '64'

config timeserver 'ntp'
    option enabled '1'
    list server 'ntp.aliyun.com'
    list server 'time1.cloud.tencent.com'
    list server 'cn.ntp.org.cn'
EOF

        # 4. Argonä¸»é¢˜é…ç½®
        cat > files/etc/config/argon << 'EOF'
config global
    option blur '1'
    option shadow '1'
    option transparency '1'
    option background '/etc/argon/background.jpg'
EOF

        # 5. é¦–æ¬¡å¯åŠ¨è„šæœ¬
        cat > files/etc/uci-defaults/99-argon-setup << 'EOF'
#!/bin/sh

# åº”ç”¨æ‰€æœ‰é…ç½®
uci commit network
uci commit wireless
uci commit system

# è®¾ç½®Argonä¸»é¢˜ä¸ºé»˜è®¤
uci set luci.main.mediaurlbase='/luci-static/argon'
uci commit luci

# å¯ç”¨IPv6
uci set firewall.@defaults[0].disable_ipv6='0'
uci commit firewall

echo "Argonä¸»é¢˜ç‰ˆå›ºä»¶é¢„é…ç½®å®Œæˆ" > /tmp/argon-setup.log

exit 0
EOF
        chmod +x files/etc/uci-defaults/99-argon-setup
        
        echo "âœ… é¢„é…ç½®æ–‡ä»¶åˆ›å»ºå®Œæˆ"

    # æ­¥éª¤7ï¼šåº”ç”¨ç¼–è¯‘é…ç½®
    - name: åº”ç”¨ç¼–è¯‘é…ç½®
      run: |
        cd "$BUILD_DIR"
        
        echo "ä¸‹è½½é«˜åŠŸçŽ‡åŸºç¡€é…ç½®..."
        curl -L -s -o .config "$HIGH_POWER_CONFIG_URL"
        
        if [ ! -s .config ]; then
          echo "âŒ é…ç½®æ–‡ä»¶ä¸‹è½½å¤±è´¥"
          exit 1
        fi
        
        echo "åº”ç”¨è‡ªå®šä¹‰ç¼–è¯‘é€‰é¡¹..."
        
        # 1. è®¾å¤‡é”å®š
        sed -i '/CONFIG_TARGET_DEVICE_mediatek_mt7986_DEVICE_/d' .config
        echo "CONFIG_TARGET_DEVICE_mediatek_mt7986_DEVICE_glinet_gl-mt6000=y" >> .config
        sed -i 's/CONFIG_TARGET_MULTI_PROFILE=y/# CONFIG_TARGET_MULTI_PROFILE is not set/' .config
        
        # 2. åŸºç¡€åŠŸèƒ½
        cat >> .config << 'EOF'
# åŸºç¡€ç½‘ç»œ
CONFIG_TARGET_IPV6_IP6TABLE=y

# PPPoEæ”¯æŒ
CONFIG_PACKAGE_kmod-ppp=y
CONFIG_PACKAGE_kmod-pppoe=y
CONFIG_PACKAGE_ppp-mod-pppoe=y
CONFIG_PACKAGE_luci-proto-ppp=y

# IPv6æ”¯æŒ
CONFIG_PACKAGE_ipv6helper=y
CONFIG_PACKAGE_odhcp6c=y
CONFIG_PACKAGE_odhcpd-ipv6only=y
CONFIG_PACKAGE_luci-proto-ipv6=y
CONFIG_PACKAGE_ip6tables=y
CONFIG_PACKAGE_ip6tables-mod-nat=y

# LuCIåŸºç¡€ + Argonä¸»é¢˜
CONFIG_PACKAGE_luci=y
CONFIG_PACKAGE_luci-base=y
CONFIG_PACKAGE_luci-compat=y
CONFIG_PACKAGE_luci-lib-ipkg=y
CONFIG_PACKAGE_luci-theme-argon=y

# iStoreåº”ç”¨å•†åº—
CONFIG_PACKAGE_luci-app-store=y

# OpenClash (Masterç¨³å®šç‰ˆ)
CONFIG_PACKAGE_luci-app-openclash=y
CONFIG_PACKAGE_luci-app-openclash_Master=y

# OpenClashä¾èµ–
CONFIG_PACKAGE_coreutils=y
CONFIG_PACKAGE_coreutils-nohup=y
CONFIG_PACKAGE_bash=y
CONFIG_PACKAGE_iptables-mod-tproxy=y
CONFIG_PACKAGE_ipset=y
CONFIG_PACKAGE_curl=y
CONFIG_PACKAGE_libopenssl=y
CONFIG_PACKAGE_libcap=y
CONFIG_PACKAGE_libcap-bin=y

# è®¾å¤‡ä¸“ç”¨
CONFIG_PACKAGE_luci-app-mtwifi-cfg=y
CONFIG_PACKAGE_luci-app-turboacc-mtk=y

# æ˜Žç¡®ç¦ç”¨ä¸éœ€è¦çš„ç»„ä»¶
# CONFIG_PACKAGE_luci-app-adblock is not set
# CONFIG_PACKAGE_luci-app-dockerman is not set
# CONFIG_PACKAGE_docker-ce is not set
# CONFIG_PACKAGE_luci-app-upnp is not set
# CONFIG_PACKAGE_luci-app-ddns is not set
# CONFIG_PACKAGE_luci-theme-bootstrap is not set
# CONFIG_PACKAGE_luci-theme-design is not set
EOF
        
        echo "âœ… ç¼–è¯‘é…ç½®åº”ç”¨å®Œæˆ"

    # æ­¥éª¤8ï¼šç”Ÿæˆæœ€ç»ˆé…ç½®
    - name: ç”Ÿæˆæœ€ç»ˆé…ç½®
      run: |
        cd "$BUILD_DIR"
        echo "ç”Ÿæˆæœ€ç»ˆé…ç½®..."
        make defconfig
        
        echo "é…ç½®æ‘˜è¦:"
        ./scripts/diffconfig.sh | head -40

    # æ­¥éª¤9ï¼šå…¨æ–°ç¼–è¯‘å‡†å¤‡
    - name: å…¨æ–°ç¼–è¯‘å‡†å¤‡
      run: |
        cd "$BUILD_DIR"
        echo "æ‰§è¡Œå…¨æ–°ç¼–è¯‘..."
        make clean
        
        echo "ä¸‹è½½è½¯ä»¶åŒ…..."
        timeout 2400 make download -j$(nproc) || {
          echo "å¹¶è¡Œä¸‹è½½å¤±è´¥ï¼Œå°è¯•å•çº¿ç¨‹..."
          make download -j1
        }
        
        DL_COUNT=$(find dl -type f \( -name "*.tar.*" -o -name "*.zip" \) 2>/dev/null | wc -l)
        echo "âœ… å·²ä¸‹è½½ $DL_COUNT ä¸ªè½¯ä»¶åŒ…"

    # æ­¥éª¤10ï¼šç¼–è¯‘å›ºä»¶
    - name: ç¼–è¯‘å›ºä»¶
      run: |
        cd "$BUILD_DIR"
        
        echo "ðŸš€ å¼€å§‹ç¼–è¯‘Argonä¸»é¢˜ç‰ˆå›ºä»¶..."
        START_TIME=$(date +%s)
        
        # ä¼˜åŒ–ç¼–è¯‘çº¿ç¨‹æ•°
        CPU_CORES=$(nproc)
        if [ $CPU_CORES -gt 8 ]; then
          MAKE_JOBS=8
        elif [ $CPU_CORES -gt 4 ]; then
          MAKE_JOBS=4
        else
          MAKE_JOBS=$CPU_CORES
        fi
        
        echo "ä½¿ç”¨ç¼–è¯‘çº¿ç¨‹æ•°: $MAKE_JOBS"
        
        # ç¼–è¯‘ï¼Œè¾“å‡ºå…³é”®ä¿¡æ¯
        make -j$MAKE_JOBS V=s 2>&1 | tee build_output.log | grep -E \
          "(error:|warning:|ERROR:|WARNING:|Image.*built|Creating.*sysupgrade|make.*Error|make.*Stop|argon|theme)"
        
        END_TIME=$(date +%s)
        DURATION=$((END_TIME - START_TIME))
        
        echo "ç¼–è¯‘è€—æ—¶: $(($DURATION / 60))åˆ†$(($DURATION % 60))ç§’"

    # æ­¥éª¤11ï¼šæ£€æŸ¥ç¼–è¯‘ç»“æžœ
    - name: æ£€æŸ¥ç¼–è¯‘ç»“æžœ
      run: |
        cd "$BUILD_DIR"
        
        echo "æ£€æŸ¥ç¼–è¯‘ç»“æžœ..."
        
        # æŸ¥æ‰¾å›ºä»¶æ–‡ä»¶
        TARGET_PATH="bin/targets/$TARGET_SUBTARGET"
        if [ -d "$TARGET_PATH" ]; then
          FIRMWARE_FILE=$(find "$TARGET_PATH" -name "*sysupgrade*.bin" -o -name "*squashfs*.bin" | head -1)
          
          if [ -n "$FIRMWARE_FILE" ] && [ -f "$FIRMWARE_FILE" ]; then
            FIRMWARE_NAME=$(basename "$FIRMWARE_FILE")
            FIRMWARE_SIZE=$(ls -lh "$FIRMWARE_FILE" | awk '{print $5}')
            
            echo "âœ… å›ºä»¶ç¼–è¯‘æˆåŠŸ!"
            echo "å›ºä»¶åç§°: $FIRMWARE_NAME"
            echo "å›ºä»¶å¤§å°: $FIRMWARE_SIZE"
            
            # è®¾ç½®è¾“å‡ºå˜é‡
            echo "FIRMWARE_NAME=$FIRMWARE_NAME" >> $GITHUB_ENV
            echo "FIRMWARE_FILE=$FIRMWARE_FILE" >> $GITHUB_ENV
            echo "FIRMWARE_PATH=$TARGET_PATH" >> $GITHUB_ENV
            
            # æ£€æŸ¥Argonä¸»é¢˜æ˜¯å¦åŒ…å«
            echo "æ£€æŸ¥Argonä¸»é¢˜:"
            if grep -q "CONFIG_PACKAGE_luci-theme-argon=y" .config; then
              echo "âœ… Argonä¸»é¢˜å·²å¯ç”¨"
            else
              echo "âŒ Argonä¸»é¢˜æœªå¯ç”¨"
            fi
            
            # åˆ—å‡ºç”Ÿæˆçš„æ–‡ä»¶
            echo "ç”Ÿæˆçš„æ–‡ä»¶åˆ—è¡¨:"
            find "$TARGET_PATH" -type f -name "*.bin" -o -name "*.manifest" -o -name "*.sha256sum" | sort
          else
            echo "âŒ æœªæ‰¾åˆ°å›ºä»¶æ–‡ä»¶"
            exit 1
          fi
        else
          echo "âŒ ç›®æ ‡ç›®å½•ä¸å­˜åœ¨: $TARGET_PATH"
          exit 1
        fi

    # æ­¥éª¤12ï¼šåˆ›å»ºå›ºä»¶ä¿¡æ¯æ–‡ä»¶
    - name: åˆ›å»ºå›ºä»¶ä¿¡æ¯
      run: |
        echo "åˆ›å»ºå›ºä»¶ä¿¡æ¯æ–‡ä»¶..."
        
        cat > firmware-info.md << EOF
# N60 Pro Argonä¸»é¢˜ç‰ˆå›ºä»¶ä¿¡æ¯

## åŸºæœ¬å‚æ•°
- **è®¾å¤‡åž‹å·**: GL.iNet GL-MT6000 (N60 Pro)
- **èŠ¯ç‰‡å¹³å°**: MediaTek MT7986
- **æ— çº¿èŠ¯ç‰‡**: MT7976 (iPaiLNA é«˜åŠŸçŽ‡)
- **ç•Œé¢ä¸»é¢˜**: Argon (çŽ°ä»£ç¾Žè§‚)

## ç¼–è¯‘ä¿¡æ¯
- **æºç ç‰ˆæœ¬**: 237's immortalwrt-mt798x-24.10
- **æäº¤å“ˆå¸Œ**: ${{ env.COMMIT_HASH }}
- **æäº¤æ—¥æœŸ**: ${{ env.COMMIT_DATE }}
- **ç¼–è¯‘æ—¶é—´**: $(date "+%Y-%m-%d %H:%M:%S")
- **ç¼–è¯‘ç¼–å·**: ${{ github.run_number }}
- **ä¸»é¢˜ç‰ˆæœ¬**: Argon ä¸»é¢˜

## é¢„é…ç½®è¯¦æƒ…

### ç½‘ç»œé…ç½®
- **ç®¡ç†åœ°å€**: 192.168.6.1
- **PPPoEè´¦å·**: 15828860970
- **PPPoEå¯†ç **: 147258
- **IPv6æ”¯æŒ**: è‡ªåŠ¨å¯ç”¨

### WiFié…ç½®
- **2.4GHzç½‘ç»œ**:
  - SSID: locust
  - å¯†ç : 36925888
  - åŠ å¯†: WPA2-PSK
- **5GHzç½‘ç»œ**:
  - SSID: locust-5G
  - å¯†ç : 36925888
  - åŠ å¯†: WPA2-PSK

### é¢„è£…æ’ä»¶
1. **iStoreåº”ç”¨å•†åº—** - æœåŠ¡èœå•ä¸­è®¿é—®
2. **OpenClash** - æœåŠ¡èœå•ä¸­è®¿é—® (éœ€é…ç½®è®¢é˜…)

### ä¸»é¢˜ç‰¹æ€§
- âœ… Argon çŽ°ä»£ä¸»é¢˜
- âœ… é€æ˜Žæ•ˆæžœ
- âœ… æ¯›çŽ»ç’ƒæ¨¡ç³Šæ•ˆæžœ
- âœ… é˜´å½±æ•ˆæžœ
- âœ… å“åº”å¼è®¾è®¡

### å›ºä»¶æ–‡ä»¶
- **æ–‡ä»¶å**: ${{ env.FIRMWARE_NAME }}
- **ç¼–è¯‘æ—¶é—´**: $(date)

## åˆ·æœºè¯´æ˜Ž
1. ä¸‹è½½æœ¬å›ºä»¶æ–‡ä»¶
2. è®¿é—®å½“å‰è·¯ç”±å™¨ç®¡ç†ç•Œé¢ (é»˜è®¤192.168.1.1)
3. è¿›å…¥"ç³»ç»Ÿ" â†’ "å¤‡ä»½/å‡çº§"
4. é€‰æ‹©æœ¬å›ºä»¶ï¼Œ**ä¸ä¿ç•™é…ç½®**åˆ·å…¥
5. ç­‰å¾…è·¯ç”±å™¨é‡å¯ (çº¦3åˆ†é’Ÿ)
6. ä½¿ç”¨æ–°åœ°å€ http://192.168.6.1 è®¿é—®

## é¦–æ¬¡ä½¿ç”¨æŒ‡å—
1. **è¿žæŽ¥WiFi**: locust (å¯†ç : 36925888) æˆ– locust-5G
2. **è®¿é—®ç®¡ç†**: æµè§ˆå™¨æ‰“å¼€ http://192.168.6.1
3. **è®¾ç½®å¯†ç **: é¦–æ¬¡è®¿é—®è®¾ç½®ç®¡ç†å‘˜å¯†ç 
4. **ä½“éªŒä¸»é¢˜**: äº«å—Argonä¸»é¢˜çš„çŽ°ä»£ç•Œé¢
5. **é…ç½®æ’ä»¶**: 
   - iStore: æœåŠ¡ â†’ iStoreåº”ç”¨å•†åº—
   - OpenClash: æœåŠ¡ â†’ OpenClash (éœ€é…ç½®è®¢é˜…)

## æ³¨æ„äº‹é¡¹
- åˆ·æœºå‰è¯·å¤‡ä»½é‡è¦é…ç½®
- ç¡®ä¿è®¾å¤‡åž‹å·ä¸º GL-MT6000
- Argonä¸»é¢˜éœ€è¦çŽ°ä»£æµè§ˆå™¨æ”¯æŒ
- WiFiå·²é¢„é…ç½®å¯†ç ï¼Œåˆ·æœºåŽå³å¯è¿žæŽ¥
EOF
        
        echo "å›ºä»¶ä¿¡æ¯æ–‡ä»¶å·²åˆ›å»º"

    # æ­¥éª¤13ï¼šè‡ªåŠ¨åˆ›å»ºGitHub Release
    - name: åˆ›å»ºGitHub Release
      id: create_release
      uses: softprops/action-gh-release@v1
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      with:
        tag_name: ${{ github.event.inputs.tag_name || 'v1.0.0' }}
        name: "N60 Pro Argonä¸»é¢˜ç‰ˆ ${{ github.event.inputs.tag_name || 'v1.0.0' }}"
        body: |
          # N60 Pro Argonä¸»é¢˜ç‰ˆå›ºä»¶
          
          ## ðŸŽ¨ ä¸»é¢˜ç‰¹è‰²
          - **ç•Œé¢ä¸»é¢˜**: Argon çŽ°ä»£ä¸»é¢˜
          - **è§†è§‰æ•ˆæžœ**: é€æ˜Žã€æ¨¡ç³Šã€é˜´å½±
          - **å“åº”å¼è®¾è®¡**: é€‚é…å„ç§è®¾å¤‡å±å¹•
          
          ## ðŸš€ å›ºä»¶ä¿¡æ¯
          - **ç¼–è¯‘æ—¶é—´**: $(date "+%Y-%m-%d %H:%M:%S")
          - **æºç ç‰ˆæœ¬**: ${{ env.COMMIT_HASH }} (${{ env.COMMIT_DATE }})
          - **ç¼–è¯‘ç¼–å·**: ${{ github.run_number }}
          - **è®¾å¤‡åž‹å·**: GL.iNet GL-MT6000 (N60 Pro)
          
          ## ðŸ“‹ é¢„é…ç½®è¯¦æƒ…
          
          ### ç½‘ç»œè®¾ç½®
          - **ç®¡ç†åœ°å€**: `192.168.6.1`
          - **PPPoEè´¦å·**: `15828860970`
          - **PPPoEå¯†ç **: `147258`
          - **IPv6æ”¯æŒ**: è‡ªåŠ¨å¯ç”¨
          
          ### WiFiè®¾ç½®
          - **2.4GHz**: SSID=`locust`, å¯†ç =`36925888`
          - **5GHz**: SSID=`locust-5G`, å¯†ç =`36925888`
          
          ### é¢„è£…æ’ä»¶
          1. **iStoreåº”ç”¨å•†åº—** - ä¸€ç«™å¼æ’ä»¶ç®¡ç†
          2. **OpenClash** - å¼ºå¤§çš„ä»£ç†å·¥å…·
          
          ## ðŸ› ï¸ åˆ·æœºæ­¥éª¤
          1. ä¸‹è½½æœ¬é¡µé¢ä¸­çš„å›ºä»¶æ–‡ä»¶ (.bin)
          2. è¿›å…¥è·¯ç”±å™¨åŽŸç®¡ç†ç•Œé¢ (é»˜è®¤192.168.1.1)
          3. ç³»ç»Ÿ â†’ å¤‡ä»½/å‡çº§ â†’ åˆ·å†™å›ºä»¶
          4. **é‡è¦**: å–æ¶ˆ"ä¿ç•™é…ç½®"é€‰é¡¹
          5. é€‰æ‹©æœ¬å›ºä»¶ï¼Œå¼€å§‹åˆ·æœº
          6. ç­‰å¾…3-5åˆ†é’Ÿè‡ªåŠ¨é‡å¯
          
          ## ðŸ”§ é¦–æ¬¡ä½¿ç”¨
          1. è¿žæŽ¥WiFi: **locust** (å¯†ç : 36925888)
          2. è®¿é—®ç®¡ç†: http://192.168.6.1
          3. è®¾ç½®ç®¡ç†å‘˜å¯†ç 
          4. äº«å—Argonä¸»é¢˜çš„çŽ°ä»£ç•Œé¢
          
          ## âš ï¸ æ³¨æ„äº‹é¡¹
          - åˆ·æœºæœ‰é£Žé™©ï¼Œè¯·ç¡®ä¿è®¾å¤‡åž‹å·æ­£ç¡®
          - å»ºè®®åˆ·æœºå‰å¤‡ä»½é‡è¦é…ç½®
          - Argonä¸»é¢˜éœ€è¦çŽ°ä»£æµè§ˆå™¨æ”¯æŒ
          - é¦–æ¬¡å¯åŠ¨å¯èƒ½éœ€è¦2-3åˆ†é’Ÿåº”ç”¨é…ç½®
          
          ## ðŸ“Š ç¼–è¯‘çŠ¶æ€
          ![ç¼–è¯‘çŠ¶æ€](https://github.com/${{ github.repository }}/actions/workflows/build_n60pro_argon_theme.yml/badge.svg)
          
          ---
          
          **æ›´å¤šè¯¦ç»†ä¿¡æ¯è¯·æŸ¥çœ‹é™„ä»¶çš„ firmware-info.md**
        draft: false
        prerelease: false
        files: |
          ${{ env.BUILD_DIR }}/bin/targets/${{ env.TARGET_SUBTARGET }}/*.bin
          firmware-info.md

    # æ­¥éª¤14ï¼šä¸Šä¼ ç¼–è¯‘æ—¥å¿—
    - name: ä¸Šä¼ ç¼–è¯‘æ—¥å¿—
      if: always()
      uses: actions/upload-artifact@v4
      with:
        name: build-logs-argon-${{ github.run_number }}
        path: |
          ${{ env.BUILD_DIR }}/build_output.log
          ${{ env.BUILD_DIR }}/.config
        retention-days: 7

    # æ­¥éª¤15ï¼šç¼–è¯‘å®Œæˆé€šçŸ¥
    - name: ç¼–è¯‘å®Œæˆé€šçŸ¥
      if: success()
      run: |
        echo "========================================"
        echo "ðŸŽ‰ Argonä¸»é¢˜ç‰ˆå›ºä»¶ç¼–è¯‘ä¸Žå‘å¸ƒå®Œæˆ!"
        echo "========================================"
        echo "ä¸»é¢˜ç‰¹è‰²: Argon çŽ°ä»£ä¸»é¢˜"
        echo "é¢„è£…æ’ä»¶: iStore + OpenClash"
        echo "é¢„é…ç½®: PPPoE + WiFi + IPv6"
        echo ""
        echo "å‘å¸ƒåœ°å€:"
        echo "https://github.com/${{ github.repository }}/releases/tag/${{ github.event.inputs.tag_name || 'v1.0.0' }}"
        echo ""
        echo "ç¼–è¯‘ä¿¡æ¯:"
        echo "- è¿è¡ŒID: ${{ github.run_id }}"
        echo "- è¿è¡Œå·: ${{ github.run_number }}"
        echo "- å›ºä»¶æ–‡ä»¶: ${{ env.FIRMWARE_NAME }}"
        echo "- æºç ç‰ˆæœ¬: ${{ env.COMMIT_HASH }}"
        echo "- ä¸»é¢˜: Argon"
        echo "========================================"
